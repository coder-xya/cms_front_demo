import{_ as j,e as W,k as le,a as U,u as oe}from"./aria-CW2vG8jH.js";import{d as F,f as M,I as Z,u as Q,J as p,g as k,L as se,ah as V,F as A,o as R,w as ee,k as re,l as D,a4 as ne,p as N,m as y,n as $,v as ie,T as ce,a0 as te,h as ae,j as X,a3 as ue,i as B,e as fe,K as Y,W as ve,Z as de,bF as me,B as pe,N as q,O as he,G as be,r as ge,H as ye,ap as we,x as Se,ao as ze,a9 as Ee}from"./index-DjE6wi1C.js";import{t as He}from"./el-button-uHYO9Pi-.js";const L=4,_e={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Te=({move:o,size:a,bar:l})=>({[l.size]:a,transform:`translate${l.axis}(${o}%)`}),K=Symbol("scrollbarContextKey"),Ce=F({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Le="Thumb",ke=M({__name:"thumb",props:Ce,setup(o){const a=o,l=Z(K),s=Q("scrollbar");l||He(Le,"can not inject scrollbar context");const i=p(),v=p(),d=p({}),c=p(!1);let u=!1,m=!1,S=0,r=0,n=te?document.onselectstart:null;const e=k(()=>_e[a.vertical?"vertical":"horizontal"]),h=k(()=>Te({size:a.size,move:a.move,bar:e.value})),z=k(()=>i.value[e.value.offset]**2/l.wrapElement[e.value.scrollSize]/a.ratio/v.value[e.value.offset]),T=f=>{var g;if(f.stopPropagation(),f.ctrlKey||[1,2].includes(f.button))return;(g=window.getSelection())==null||g.removeAllRanges(),E(f);const C=f.currentTarget;C&&(d.value[e.value.axis]=C[e.value.offset]-(f[e.value.client]-C.getBoundingClientRect()[e.value.direction]))},w=f=>{if(!v.value||!i.value||!l.wrapElement)return;const g=Math.abs(f.target.getBoundingClientRect()[e.value.direction]-f[e.value.client]),C=v.value[e.value.offset]/2,O=(g-C)*100*z.value/i.value[e.value.offset];l.wrapElement[e.value.scroll]=O*l.wrapElement[e.value.scrollSize]/100},E=f=>{f.stopImmediatePropagation(),u=!0,S=l.wrapElement.scrollHeight,r=l.wrapElement.scrollWidth,document.addEventListener("mousemove",P),document.addEventListener("mouseup",x),n=document.onselectstart,document.onselectstart=()=>!1},P=f=>{if(!i.value||!v.value||u===!1)return;const g=d.value[e.value.axis];if(!g)return;const C=(i.value.getBoundingClientRect()[e.value.direction]-f[e.value.client])*-1,O=v.value[e.value.offset]-g,I=(C-O)*100*z.value/i.value[e.value.offset];e.value.scroll==="scrollLeft"?l.wrapElement[e.value.scroll]=I*r/100:l.wrapElement[e.value.scroll]=I*S/100},x=()=>{u=!1,d.value[e.value.axis]=0,document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",x),b(),m&&(c.value=!1)},H=()=>{m=!1,c.value=!!a.size},t=()=>{m=!0,c.value=u};se(()=>{b(),document.removeEventListener("mouseup",x)});const b=()=>{document.onselectstart!==n&&(document.onselectstart=n)};return W(V(l,"scrollbarElement"),"mousemove",H),W(V(l,"scrollbarElement"),"mouseleave",t),(f,g)=>(R(),A(ce,{name:y(s).b("fade"),persisted:""},{default:ee(()=>[re(D("div",{ref_key:"instance",ref:i,class:N([y(s).e("bar"),y(s).is(y(e).key)]),onMousedown:w,onClick:ne(()=>{},["stop"])},[D("div",{ref_key:"thumb",ref:v,class:N(y(s).e("thumb")),style:$(y(h)),onMousedown:T},null,38)],42,["onClick"]),[[ie,f.always||c.value]])]),_:1},8,["name"]))}});var G=j(ke,[["__file","thumb.vue"]]);const xe=F({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),Be=M({__name:"bar",props:xe,setup(o,{expose:a}){const l=o,s=Z(K),i=p(0),v=p(0),d=p(""),c=p(""),u=p(1),m=p(1);return a({handleScroll:n=>{if(n){const e=n.offsetHeight-L,h=n.offsetWidth-L;v.value=n.scrollTop*100/e*u.value,i.value=n.scrollLeft*100/h*m.value}},update:()=>{const n=s==null?void 0:s.wrapElement;if(!n)return;const e=n.offsetHeight-L,h=n.offsetWidth-L,z=e**2/n.scrollHeight,T=h**2/n.scrollWidth,w=Math.max(z,l.minSize),E=Math.max(T,l.minSize);u.value=z/(e-z)/(w/(e-w)),m.value=T/(h-T)/(E/(h-E)),c.value=w+L<e?`${w}px`:"",d.value=E+L<h?`${E}px`:""}}),(n,e)=>(R(),ae(ue,null,[X(G,{move:i.value,ratio:m.value,size:d.value,always:n.always},null,8,["move","ratio","size","always"]),X(G,{move:v.value,ratio:u.value,size:c.value,vertical:"",always:n.always},null,8,["move","ratio","size","always"])],64))}});var Re=j(Be,[["__file","bar.vue"]]);const Ne=F({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:fe([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...le(["ariaLabel","ariaOrientation"])}),Pe={"end-reached":o=>["left","right","top","bottom"].includes(o),scroll:({scrollTop:o,scrollLeft:a})=>[o,a].every(B)},Me="ElScrollbar",Oe=M({name:Me}),We=M({...Oe,props:Ne,emits:Pe,setup(o,{expose:a,emit:l}){const s=o,i=Q("scrollbar");let v,d,c=0,u=0,m="";const S=p(),r=p(),n=p(),e=p(),h=k(()=>{const t={};return s.height&&(t.height=U(s.height)),s.maxHeight&&(t.maxHeight=U(s.maxHeight)),[s.wrapStyle,t]}),z=k(()=>[s.wrapClass,i.e("wrap"),{[i.em("wrap","hidden-default")]:!s.native}]),T=k(()=>[i.e("view"),s.viewClass]),w=()=>{var t;if(r.value){(t=e.value)==null||t.handleScroll(r.value);const b=c,f=u;c=r.value.scrollTop,u=r.value.scrollLeft;const g={bottom:c+r.value.clientHeight>=r.value.scrollHeight,top:c<=0&&b!==0,right:u+r.value.clientWidth>=r.value.scrollWidth&&f!==u,left:u<=0&&f!==0};b!==c&&(m=c>b?"bottom":"top"),f!==u&&(m=u>f?"right":"left"),l("scroll",{scrollTop:c,scrollLeft:u}),g[m]&&l("end-reached",m)}};function E(t,b){we(t)?r.value.scrollTo(t):B(t)&&B(b)&&r.value.scrollTo(t,b)}const P=t=>{B(t)&&(r.value.scrollTop=t)},x=t=>{B(t)&&(r.value.scrollLeft=t)},H=()=>{var t;(t=e.value)==null||t.update()};return Y(()=>s.noresize,t=>{t?(v==null||v(),d==null||d()):({stop:v}=oe(n,H),d=W("resize",H))},{immediate:!0}),Y(()=>[s.maxHeight,s.height],()=>{s.native||q(()=>{var t;H(),r.value&&((t=e.value)==null||t.handleScroll(r.value))})}),ve(K,de({scrollbarElement:S,wrapElement:r})),me(()=>{r.value&&(r.value.scrollTop=c,r.value.scrollLeft=u)}),pe(()=>{s.native||q(()=>{H()})}),he(()=>H()),a({wrapRef:r,update:H,scrollTo:E,setScrollTop:P,setScrollLeft:x,handleScroll:w}),(t,b)=>(R(),ae("div",{ref_key:"scrollbarRef",ref:S,class:N(y(i).b())},[D("div",{ref_key:"wrapRef",ref:r,class:N(y(z)),style:$(y(h)),tabindex:t.tabindex,onScroll:w},[(R(),A(ye(t.tag),{id:t.id,ref_key:"resizeRef",ref:n,class:N(y(T)),style:$(t.viewStyle),role:t.role,"aria-label":t.ariaLabel,"aria-orientation":t.ariaOrientation},{default:ee(()=>[ge(t.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),t.native?be("v-if",!0):(R(),A(Re,{key:0,ref_key:"barRef",ref:e,always:t.always,"min-size":t.minSize},null,8,["always","min-size"]))],2))}});var Ae=j(We,[["__file","scrollbar.vue"]]);const Fe=Se(Ae),_=new Map;if(te){let o;document.addEventListener("mousedown",a=>o=a),document.addEventListener("mouseup",a=>{if(o){for(const l of _.values())for(const{documentHandler:s}of l)s(a,o);o=void 0}})}function J(o,a){let l=[];return ze(a.arg)?l=a.arg:Ee(a.arg)&&l.push(a.arg),function(s,i){const v=a.instance.popperRef,d=s.target,c=i==null?void 0:i.target,u=!a||!a.instance,m=!d||!c,S=o.contains(d)||o.contains(c),r=o===d,n=l.length&&l.some(h=>h==null?void 0:h.contains(d))||l.length&&l.includes(c),e=v&&(v.contains(d)||v.contains(c));u||m||S||r||n||e||a.value(s,i)}}const Ke={beforeMount(o,a){_.has(o)||_.set(o,[]),_.get(o).push({documentHandler:J(o,a),bindingFn:a.value})},updated(o,a){_.has(o)||_.set(o,[]);const l=_.get(o),s=l.findIndex(v=>v.bindingFn===a.oldValue),i={documentHandler:J(o,a),bindingFn:a.value};s>=0?l.splice(s,1,i):l.push(i)},unmounted(o){_.delete(o)}};export{Ke as C,Fe as E,Pe as s};
