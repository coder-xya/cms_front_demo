import{f as I,Z as L,J as y,h as x,o as V,j as e,l as h,w as t,q as b,ad as z,aE as T,m as E,s as A,aF as O,F as $,G as Z,a3 as B,aw as F}from"./index-DjE6wi1C.js";import{E as D}from"./el-button-uHYO9Pi-.js";import{E as M,a as q}from"./el-form-item-CqIBjJyG.js";import{a as H,E as K}from"./el-col-DP6Bp5ur.js";import{E as W,a as X}from"./el-overlay-BlC4Qfdl.js";import{E as P}from"./el-checkbox-DZW_ZEyL.js";import"./el-scrollbar-CyxxYyB_.js";import"./el-popper-DDphpXHv.js";import{E as Q,a as j,u as G,b as Y,c as ee,f as N,d as le}from"./format-B4vquexf.js";import"./aria-CW2vG8jH.js";import"./refs-_qraV61z.js";const te={class:"search"},oe={class:"btns"},ae=I({__name:"user-search",emits:["queryClick","resetClick"],setup(R,{emit:v}){const m=v,l=L({name:"",realname:"",cellphone:"",enable:"",createAt:""}),i=y();function c(){var r;(r=i.value)==null||r.resetFields(),m("resetClick")}function C(){m("queryClick",l)}return(r,n)=>{const w=P,k=q,_=K,g=j,a=Q,p=W,u=H,d=M,f=D;return V(),x("div",te,[e(d,{model:l,ref_key:"formRef",ref:i,"label-width":"80px",size:"large"},{default:t(()=>[e(u,{gutter:20},{default:t(()=>[e(_,{span:8},{default:t(()=>[e(k,{label:"用户名",prop:"name"},{default:t(()=>[e(w,{modelValue:l.name,"onUpdate:modelValue":n[0]||(n[0]=s=>l.name=s),placeholder:"请输入查询的用户名"},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:8},{default:t(()=>[e(k,{label:"真实姓名",prop:"realname"},{default:t(()=>[e(w,{modelValue:l.realname,"onUpdate:modelValue":n[1]||(n[1]=s=>l.realname=s),placeholder:"请输入查询的真实姓名"},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:8},{default:t(()=>[e(k,{label:"手机号码",prop:"cellphone"},{default:t(()=>[e(w,{modelValue:l.cellphone,"onUpdate:modelValue":n[2]||(n[2]=s=>l.cellphone=s),placeholder:"请输入查询的手机号码"},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:8},{default:t(()=>[e(k,{label:"状态",prop:"enable"},{default:t(()=>[e(a,{modelValue:l.enable,"onUpdate:modelValue":n[3]||(n[3]=s=>l.enable=s),placeholder:"请选择查询的状态",style:{width:"100%"}},{default:t(()=>[e(g,{label:"启用",value:1}),e(g,{label:"禁用",value:0})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(_,{span:8},{default:t(()=>[e(k,{label:"创建时间",prop:"createAt"},{default:t(()=>[e(p,{modelValue:l.createAt,"onUpdate:modelValue":n[4]||(n[4]=s=>l.createAt=s),type:"daterange","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),h("div",oe,[e(f,{icon:"Refresh",onClick:c},{default:t(()=>n[5]||(n[5]=[b("重置")])),_:1,__:[5]}),e(f,{icon:"Search",type:"primary",onClick:C},{default:t(()=>n[6]||(n[6]=[b("查询")])),_:1,__:[6]})])])}}}),ne=z(ae,[["__scopeId","data-v-5c09e4ac"]]),se={class:"content"},re={class:"header"},de={class:"table"},ie={class:"pagination"},ue=I({__name:"user-content",emits:["newClick","editClick"],setup(R,{expose:v,emit:m}){const l=m,i=G(),c=y(1),C=y(10);_();const{usersList:r,usersTotalCount:n}=T(i);function w(){_()}function k(){_()}function _(u={}){const d=C.value,f=(c.value-1)*d,U={...{size:d,offset:f},...u};i.postUsersListAction(U)}function g(u){i.deleteUserByIdAction(u)}function a(){l("newClick")}function p(u){l("editClick",u)}return v({fetchUserListData:_}),(u,d)=>{const f=D,s=ee,U=Y,S=le;return V(),x("div",se,[h("div",re,[d[3]||(d[3]=h("h3",{class:"title"},"用户列表",-1)),e(f,{type:"primary",onClick:a},{default:t(()=>d[2]||(d[2]=[b("新建用户")])),_:1,__:[2]})]),h("div",de,[e(U,{data:E(r),border:"",style:{width:"100%"}},{default:t(()=>[e(s,{align:"center",type:"selection",width:"60px"}),e(s,{align:"center",type:"index",label:"序号",width:"60px"}),e(s,{align:"center",label:"用户名",prop:"name",width:"150px"}),e(s,{align:"center",label:"真实姓名",prop:"realname",width:"150px"}),e(s,{align:"center",label:"手机号码",prop:"cellphone",width:"150px"}),e(s,{align:"center",label:"状态",prop:"enable",width:"100px"},{default:t(o=>[e(f,{size:"small",type:o.row.enable?"primary":"danger",plain:""},{default:t(()=>[b(A(o.row.enable?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),e(s,{align:"center",label:"创建时间",prop:"createAt"},{default:t(o=>[b(A(E(N)(o.row.createAt)),1)]),_:1}),e(s,{align:"center",label:"更新时间",prop:"updateAt"},{default:t(o=>[b(A(E(N)(o.row.updateAt)),1)]),_:1}),e(s,{align:"center",label:"操作",width:"150px"},{default:t(o=>[e(f,{size:"small",icon:"Edit",type:"primary",text:"",onClick:J=>p(o.row)},{default:t(()=>d[4]||(d[4]=[b(" 编辑 ")])),_:2,__:[4]},1032,["onClick"]),e(f,{size:"small",icon:"Delete",type:"danger",text:"",onClick:J=>g(o.row.id)},{default:t(()=>d[5]||(d[5]=[b(" 删除 ")])),_:2,__:[5]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),h("div",ie,[e(S,{"current-page":c.value,"onUpdate:currentPage":d[0]||(d[0]=o=>c.value=o),"page-size":C.value,"onUpdate:pageSize":d[1]||(d[1]=o=>C.value=o),"page-sizes":[10,20,30],layout:"total, sizes, prev, pager, next, jumper",total:E(n),onSizeChange:w,onCurrentChange:k},null,8,["current-page","page-size","total"])])])}}}),pe=z(ue,[["__scopeId","data-v-a0d3a2e2"]]),me={class:"modal"},ce={class:"form"},_e={class:"dialog-footer"},fe=I({__name:"user-modal",setup(R,{expose:v}){const m=y(!1),l=L({name:"",realname:"",password:"",cellphone:"",roleId:"",departmentId:""}),i=y(!0),c=y(),C=O(),r=G(),{entireRoles:n,entireDepartments:w}=T(C);function k(g=!0,a){if(m.value=!0,i.value=g,!g&&a){for(const p in l)l[p]=a[p];c.value=a}else{for(const p in l)l[p]="";c.value=null}}function _(){m.value=!1,!i.value&&c.value?r.editUserDataAction(c.value.id,l):r.newUserDataAction({...l,enable:1})}return v({setModalVisible:k}),(g,a)=>{const p=P,u=q,d=j,f=Q,s=M,U=D,S=X;return V(),x("div",me,[e(S,{modelValue:m.value,"onUpdate:modelValue":a[7]||(a[7]=o=>m.value=o),title:i.value?"新建用户":"编辑用户",width:"30%",center:""},{footer:t(()=>[h("span",_e,[e(U,{onClick:a[6]||(a[6]=o=>m.value=!1)},{default:t(()=>a[8]||(a[8]=[b("取消")])),_:1,__:[8]}),e(U,{type:"primary",onClick:_},{default:t(()=>a[9]||(a[9]=[b(" 确定 ")])),_:1,__:[9]})])]),default:t(()=>[h("div",ce,[e(s,{model:l,"label-width":"80px",size:"large"},{default:t(()=>[e(u,{label:"用户名",prop:"name"},{default:t(()=>[e(p,{modelValue:l.name,"onUpdate:modelValue":a[0]||(a[0]=o=>l.name=o),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),e(u,{label:"真实姓名",prop:"realname"},{default:t(()=>[e(p,{modelValue:l.realname,"onUpdate:modelValue":a[1]||(a[1]=o=>l.realname=o),placeholder:"请输入真实姓名"},null,8,["modelValue"])]),_:1}),i.value?(V(),$(u,{key:0,label:"密码",prop:"password"},{default:t(()=>[e(p,{modelValue:l.password,"onUpdate:modelValue":a[2]||(a[2]=o=>l.password=o),placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1})):Z("",!0),e(u,{label:"手机号码",prop:"cellphone"},{default:t(()=>[e(p,{modelValue:l.cellphone,"onUpdate:modelValue":a[3]||(a[3]=o=>l.cellphone=o),placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1}),e(u,{label:"选择角色",prop:"roleId"},{default:t(()=>[e(f,{modelValue:l.roleId,"onUpdate:modelValue":a[4]||(a[4]=o=>l.roleId=o),placeholder:"请选择角色",style:{width:"100%"}},{default:t(()=>[(V(!0),x(B,null,F(E(n),o=>(V(),$(d,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"选择部门",prop:"departmentId"},{default:t(()=>[e(f,{modelValue:l.departmentId,"onUpdate:modelValue":a[5]||(a[5]=o=>l.departmentId=o),placeholder:"请选择部门",style:{width:"100%"}},{default:t(()=>[(V(!0),x(B,null,F(E(w),o=>(V(),$(d,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["modelValue","title"])])}}}),be=z(fe,[["__scopeId","data-v-a2f13afb"]]),ve={class:"user"},Ce=I({__name:"user",setup(R){const v=y();function m(r){var n;(n=v.value)==null||n.fetchUserListData(r)}function l(){var r;(r=v.value)==null||r.fetchUserListData()}const i=y();function c(){var r;(r=i.value)==null||r.setModalVisible()}function C(r){var n;console.log(r),(n=i.value)==null||n.setModalVisible(!1,r)}return(r,n)=>(V(),x("div",ve,[e(ne,{onQueryClick:m,onResetClick:l}),e(pe,{ref_key:"contentRef",ref:v,onNewClick:c,onEditClick:C},null,512),e(be,{ref_key:"modalRef",ref:i},null,512)]))}}),Re=z(Ce,[["__scopeId","data-v-65b5cfdc"]]);export{Re as default};
