import{ac as R,f as H,J as E,aE as K,h as P,o,l as C,F as r,G as w,s as z,m as l,w as i,q as m,j as T,am as c,a3 as $,aw as M,r as O,ad as W}from"./index-_TlVDSm8.js";import{u as X,b as Y,c as Z,f as ee,d as te}from"./format-BO4K6zOM.js";import"./el-scrollbar-B-J_XXcO.js";import"./el-popper-2DLf45dc.js";import"./el-checkbox-D0toRvbK.js";import{E as ne}from"./el-button-41awZ3Fs.js";function _(y){const k=R(),{permissions:h}=k;return!!h.find(s=>s.includes(y))}const oe={class:"content"},ae={class:"header"},se={class:"title"},re={class:"table"},ie={class:"pagination"},le=H({__name:"page-content",props:{contentConfig:{}},emits:["newClick","editClick"],setup(y,{expose:k,emit:h}){const s=y,S=h,D=_(`${s.contentConfig.pageName}:create`),A=_(`${s.contentConfig.pageName}:delete`),I=_(`${s.contentConfig.pageName}:update`),L=_(`${s.contentConfig.pageName}:query`),d=X(),f=E(1),v=E(10);d.$onAction(({name:t,after:n})=>{n(()=>{(t==="deletePageByIdAction"||t==="editPageDataAction"||t==="newPageDataAction")&&(f.value=1)})}),g();const{pageList:U,pageTotalCount:x}=K(d);function V(){g()}function q(){g()}function g(t={}){if(!L)return;const n=v.value,p=(f.value-1)*n,N={...{size:n,offset:p},...t};d.postPageListAction(s.contentConfig.pageName,N)}function j(t){d.deletePageByIdAction(s.contentConfig.pageName,t)}function F(){S("newClick")}function G(t){S("editClick",t)}return k({fetchPageListData:g}),(t,n)=>{var b,B;const p=ne,u=Z,N=Y,J=te;return o(),P("div",oe,[C("div",ae,[C("h3",se,z(((B=(b=t.contentConfig)==null?void 0:b.header)==null?void 0:B.title)??"数据列表"),1),l(D)?(o(),r(p,{key:0,type:"primary",onClick:F},{default:i(()=>{var e,a;return[m(z(((a=(e=t.contentConfig)==null?void 0:e.header)==null?void 0:a.btnTitle)??"新建数据"),1)]}),_:1})):w("",!0)]),C("div",re,[T(N,c({data:l(U),border:"",style:{width:"100%"}},t.contentConfig.childrenTree),{default:i(()=>[(o(!0),P($,null,M(t.contentConfig.propsList,e=>(o(),P($,{key:e.prop},[e.type==="timer"?(o(),r(u,c({key:0,align:"center"},{ref_for:!0},e),{default:i(a=>[m(z(l(ee)(a.row[e.prop])),1)]),_:2},1040)):e.type==="handler"?(o(),r(u,c({key:1,align:"center"},{ref_for:!0},e),{default:i(a=>[l(I)?(o(),r(p,{key:0,size:"small",icon:"Edit",type:"primary",text:"",onClick:Q=>G(a.row)},{default:i(()=>n[2]||(n[2]=[m(" 编辑 ")])),_:2,__:[2]},1032,["onClick"])):w("",!0),l(A)?(o(),r(p,{key:1,size:"small",icon:"Delete",type:"danger",text:"",onClick:Q=>j(a.row.id)},{default:i(()=>n[3]||(n[3]=[m(" 删除 ")])),_:2,__:[3]},1032,["onClick"])):w("",!0)]),_:2},1040)):e.type==="custom"?(o(),r(u,c({key:2,align:"center"},{ref_for:!0},e),{default:i(a=>[O(t.$slots,e.slotName,c({ref_for:!0},a,{prop:e.prop,hName:"why"}),void 0,!0)]),_:2},1040)):(o(),r(u,c({key:3,align:"center"},{ref_for:!0},e),null,16))],64))),128))]),_:3},16,["data"])]),C("div",ie,[T(J,{"current-page":f.value,"onUpdate:currentPage":n[0]||(n[0]=e=>f.value=e),"page-size":v.value,"onUpdate:pageSize":n[1]||(n[1]=e=>v.value=e),"page-sizes":[10,20,30],layout:"total, sizes, prev, pager, next, jumper",total:l(x),onSizeChange:V,onCurrentChange:q},null,8,["current-page","page-size","total"])])])}}}),Ce=W(le,[["__scopeId","data-v-83ab2fea"]]);export{Ce as P,_ as u};
