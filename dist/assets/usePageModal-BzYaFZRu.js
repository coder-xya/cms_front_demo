import{f as $,Z as B,J as k,h as v,G as g,m as j,o as t,j as _,l as S,w as d,a3 as U,aw as I,F as i,q as P,ad as M,r as G}from"./index-_TlVDSm8.js";import{E as q}from"./el-button-41awZ3Fs.js";import{E as x,a as L}from"./el-form-item-N-zpJKZ_.js";import{a as J,E as O}from"./el-col-BNO48pQj.js";import{E as Q,a as T,u as W}from"./format-BO4K6zOM.js";import"./el-scrollbar-B-J_XXcO.js";import"./el-popper-2DLf45dc.js";import{E as z,a as Z}from"./el-overlay-BLQ0a-dk.js";import{E as A}from"./el-checkbox-D0toRvbK.js";import{u as H}from"./page-content-BeCayQlt.js";const K={key:0,class:"search"},X={class:"btns"},Y=$({__name:"page-search",props:{searchConfig:{}},emits:["queryClick","resetClick"],setup(u,{emit:h}){const n=h,r=u,f=H(`${r.searchConfig.pageName}:query`),o={};for(const c of r.searchConfig.formItems)o[c.prop]=c.initialValue??"";const s=B(o),y=k();function b(){var c;(c=y.value)==null||c.resetFields(),n("resetClick")}function N(){n("queryClick",s)}return(c,l)=>{const p=A,m=z,V=T,C=Q,R=L,D=O,F=J,E=x,w=q;return j(f)?(t(),v("div",K,[_(E,{model:s,ref_key:"formRef",ref:y,"label-width":c.searchConfig.labelWidth??"80px",size:"large"},{default:d(()=>[_(F,{gutter:20},{default:d(()=>[(t(!0),v(U,null,I(c.searchConfig.formItems,e=>(t(),i(D,{key:e.prop,span:8},{default:d(()=>[_(R,{label:e.label,prop:e.prop},{default:d(()=>[e.type==="input"?(t(),i(p,{key:0,modelValue:s[e.prop],"onUpdate:modelValue":a=>s[e.prop]=a,placeholder:e.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):g("",!0),e.type==="date-picker"?(t(),i(m,{key:1,modelValue:s[e.prop],"onUpdate:modelValue":a=>s[e.prop]=a,type:"daterange","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue","onUpdate:modelValue"])):g("",!0),e.type==="select"?(t(),i(C,{key:2,modelValue:s[e.prop],"onUpdate:modelValue":a=>s[e.prop]=a,placeholder:e.placeholder,style:{width:"100%"}},{default:d(()=>[(t(!0),v(U,null,I(e.options,a=>(t(),i(V,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):g("",!0)]),_:2},1032,["label","prop"])]),_:2},1024))),128))]),_:1})]),_:1},8,["model","label-width"]),S("div",X,[_(w,{icon:"Refresh",onClick:b},{default:d(()=>l[0]||(l[0]=[P("重置")])),_:1,__:[0]}),_(w,{icon:"Search",type:"primary",onClick:N},{default:d(()=>l[1]||(l[1]=[P("查询")])),_:1,__:[1]})])])):g("",!0)}}}),me=M(Y,[["__scopeId","data-v-bd80f5ae"]]),ee={class:"modal"},oe={class:"form"},le={class:"dialog-footer"},ae=$({__name:"page-modal",props:{modalConfig:{},otherInfo:{}},setup(u,{expose:h}){const n=u,r=k(!1),f={};for(const l of n.modalConfig.formItems)f[l.prop]=l.initialValue??"";const o=B(f),s=k(!0),y=k(),b=W();function N(l=!0,p){if(r.value=!0,s.value=l,!l&&p){for(const m in o)o[m]=p[m];y.value=p}else{for(const m in o){const V=n.modalConfig.formItems.find(C=>C.prop===m);o[m]=V?V.initialValue:""}y.value=null}}function c(){r.value=!1;let l=o;n.otherInfo&&(l={...l,...n.otherInfo}),!s.value&&y.value?b.editPageDataAction(n.modalConfig.pageName,y.value.id,l):b.newPageDataAction(n.modalConfig.pageName,l)}return h({setModalVisible:N}),(l,p)=>{const m=A,V=z,C=T,R=Q,D=L,F=x,E=q,w=Z;return t(),v("div",ee,[_(w,{modelValue:r.value,"onUpdate:modelValue":p[1]||(p[1]=e=>r.value=e),title:s.value?l.modalConfig.header.newTitle:l.modalConfig.header.editTitle,width:"30%",center:""},{footer:d(()=>[S("span",le,[_(E,{onClick:p[0]||(p[0]=e=>r.value=!1)},{default:d(()=>p[2]||(p[2]=[P("取消")])),_:1,__:[2]}),_(E,{type:"primary",onClick:c},{default:d(()=>p[3]||(p[3]=[P(" 确定 ")])),_:1,__:[3]})])]),default:d(()=>[S("div",oe,[_(F,{model:o,"label-width":"80px",size:"large"},{default:d(()=>[(t(!0),v(U,null,I(l.modalConfig.formItems,e=>(t(),i(D,{key:e.prop,label:e.label,prop:e.prop},{default:d(()=>[e.type==="input"?(t(),i(m,{key:0,modelValue:o[e.prop],"onUpdate:modelValue":a=>o[e.prop]=a,placeholder:e.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):g("",!0),e.type==="date-picker"?(t(),i(V,{key:1,modelValue:o[e.prop],"onUpdate:modelValue":a=>o[e.prop]=a,type:"daterange","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue","onUpdate:modelValue"])):g("",!0),e.type==="select"?(t(),i(R,{key:2,modelValue:o[e.prop],"onUpdate:modelValue":a=>o[e.prop]=a,placeholder:e.placeholder,style:{width:"100%"}},{default:d(()=>[(t(!0),v(U,null,I(e.options,a=>(t(),i(C,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):g("",!0),e.type==="custom"?G(l.$slots,e.slotName,{key:3},void 0,!0):g("",!0)]),_:2},1032,["label","prop"]))),128))]),_:3},8,["model"])])]),_:3},8,["modelValue","title"])])}}}),_e=M(ae,[["__scopeId","data-v-a63c8711"]]);function he(){const u=k();function h(r){var f;(f=u.value)==null||f.fetchPageListData(r)}function n(){var r;(r=u.value)==null||r.fetchPageListData()}return{contentRef:u,handleQueryClick:h,handleResetClick:n}}function ge(u,h){const n=k();function r(){var o;(o=n.value)==null||o.setModalVisible(),u&&u()}function f(o){var s;(s=n.value)==null||s.setModalVisible(!1,o),h&&h(o)}return{modalRef:n,handleNewClick:r,handleEditClick:f}}export{me as P,ge as a,_e as b,he as u};
